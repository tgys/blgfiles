{"version":3,"sources":["../../src/deck-renderer.js"],"names":["initializeResources","render","finalizeResources","createDeckRenderer","DeckProps","externalRenderers","DeckRenderer","view","props","deck","context","gl","call","on","deckInstance","setProps","toJSON","requestRender","size","width","height","viewState","latitude","center","longitude","zoom","bearing","camera","heading","pitch","tilt"],"mappings":";;;AAEA,SAAQA,mBAAR,EAA6BC,MAAM,IAANA,OAA7B,EAAqCC,iBAArC,QAA6D,WAA7D;AAEA,eAAe,SAASC,kBAAT,CAA4BC,SAA5B,EAAuCC,iBAAvC,EAA0D;AAAA,MACjEC,YADiE;AAErE,0BAAYC,IAAZ,EAAkBC,KAAlB,EAAyB;AAAA;;AACvB,WAAKD,IAAL,GAAYA,IAAZ;AACA,WAAKE,IAAL,GAAY,IAAIL,SAAJ,CAAcI,KAAd,CAAZ;AACD;;AALoE;AAAA;AAAA,4BAO/DE,OAP+D,EAOtD;AAAA;;AACb,YAAMC,EAAE,GAAGD,OAAO,CAACC,EAAnB;AACAX,QAAAA,mBAAmB,CAACY,IAApB,CAAyB,IAAzB,EAA+BD,EAA/B;AAEA,aAAKF,IAAL,CAAUI,EAAV,CAAa,QAAb,EAAuB,UAAAL,KAAK;AAAA,iBAAI,KAAI,CAACM,YAAL,CAAkBC,QAAlB,CAA2BP,KAA3B,CAAJ;AAAA,SAA5B;AAEA,aAAKM,YAAL,CAAkBC,QAAlB,CAA2B,KAAKN,IAAL,CAAUO,MAAV,EAA3B;AACD;AAdoE;AAAA;AAAA,gCAgB3D;AACRd,QAAAA,iBAAiB,CAACU,IAAlB,CAAuB,IAAvB;AACD;AAlBoE;AAAA;AAAA,+BAoB5D;AACPP,QAAAA,iBAAiB,CAACY,aAAlB,CAAgC,KAAKV,IAArC;AACD;AAtBoE;AAAA;AAAA,6BAwB9DG,OAxB8D,EAwBrD;AAAA,6CACU,KAAKH,IAAL,CAAUW,IADpB;AAAA,YACPC,KADO;AAAA,YACAC,MADA;;AAGdnB,QAAAA,OAAM,CAACW,IAAP,CAAY,IAAZ,EAAkB;AAChBD,UAAAA,EAAE,EAAED,OAAO,CAACC,EADI;AAEhBQ,UAAAA,KAAK,EAALA,KAFgB;AAGhBC,UAAAA,MAAM,EAANA,MAHgB;AAIhBC,UAAAA,SAAS,EAAE;AACTC,YAAAA,QAAQ,EAAE,KAAKf,IAAL,CAAUgB,MAAV,CAAiBD,QADlB;AAETE,YAAAA,SAAS,EAAE,KAAKjB,IAAL,CAAUgB,MAAV,CAAiBC,SAFnB;AAGTC,YAAAA,IAAI,EAAE,KAAKlB,IAAL,CAAUkB,IAHP;AAITC,YAAAA,OAAO,EAAE,KAAKnB,IAAL,CAAUoB,MAAV,CAAiBC,OAJjB;AAKTC,YAAAA,KAAK,EAAE,KAAKtB,IAAL,CAAUoB,MAAV,CAAiBG;AALf;AAJK,SAAlB;AAYD;AAvCoE;;AAAA;AAAA;;AA0CvE,SAAOxB,YAAP;AACD","sourcesContent":["/* eslint-disable no-invalid-this */\n\nimport {initializeResources, render, finalizeResources} from './commons';\n\nexport default function createDeckRenderer(DeckProps, externalRenderers) {\n  class DeckRenderer {\n    constructor(view, props) {\n      this.view = view;\n      this.deck = new DeckProps(props);\n    }\n\n    setup(context) {\n      const gl = context.gl;\n      initializeResources.call(this, gl);\n\n      this.deck.on('change', props => this.deckInstance.setProps(props));\n\n      this.deckInstance.setProps(this.deck.toJSON());\n    }\n\n    dispose() {\n      finalizeResources.call(this);\n    }\n\n    redraw() {\n      externalRenderers.requestRender(this.view);\n    }\n\n    render(context) {\n      const [width, height] = this.view.size;\n\n      render.call(this, {\n        gl: context.gl,\n        width,\n        height,\n        viewState: {\n          latitude: this.view.center.latitude,\n          longitude: this.view.center.longitude,\n          zoom: this.view.zoom,\n          bearing: this.view.camera.heading,\n          pitch: this.view.camera.tilt\n        }\n      });\n    }\n  }\n\n  return DeckRenderer;\n}\n"],"file":"deck-renderer.js"}