{"version":3,"sources":["../../src/index.js"],"names":["arcGIS","loadArcGISModules","modules","loadScriptOptions","namespace","Array","isArray","loadArcGISModule","then","array","esri","Layer","layers","Accessor","core","BaseLayerViewGL2D","views","externalRenderers","initialize","DeckProps","DeckLayerView2D","DeckLayer","DeckRenderer"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAIA,MAAM,GAAG,IAAb;;SAEsBC,iB;;;;;uFAAf,iBAAiCC,OAAjC,EAA0CC,iBAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,YAAAA,SADD,GACaC,KAAK,CAACC,OAAN,CAAcJ,OAAd,IAAyB,IAAzB,GAAgCA,OAD7C;AAAA;AAAA,mBAECK,gBAAgB,CAACH,SAAD,EAAYD,iBAAZ,CAFjB;;AAAA;AAAA,iBAIDE,KAAK,CAACC,OAAN,CAAcJ,OAAd,CAJC;AAAA;AAAA;AAAA;;AAAA,6CAKI,6BAAsBA,OAAtB,EAA+BC,iBAA/B,EAAkDK,IAAlD,CAAuD,UAAAC,KAAK,EAAI;AACrE,uCAAWT,MAAX;AAAmBE,gBAAAA,OAAO,EAAEO;AAA5B;AACD,aAFM,CALJ;;AAAA;AAAA,6CASET,MATF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAYP,SAASO,gBAAT,CAA0BG,IAA1B,EAAgCP,iBAAhC,EAAmD;AACjD,MAAIH,MAAJ,EAAY;AAEV,WAAOA,MAAP;AACD;;AACD,MAAIU,IAAJ,EAAU;AAGR,QAAMC,KAAK,GAAGD,IAAI,CAACE,MAAL,CAAYD,KAA1B;AACA,QAAME,QAAQ,GAAGH,IAAI,CAACI,IAAL,CAAUD,QAA3B;AACA,QAAME,iBAAiB,GAAGL,IAAI,CAACM,KAAL,CAAW,IAAX,EAAiBJ,MAAjB,CAAwBG,iBAAlD;AACA,QAAME,iBAAiB,GAAGP,IAAI,CAACM,KAAL,CAAW,IAAX,EAAiBC,iBAA3C;AAEA,WAAOC,UAAU,CAACP,KAAD,EAAQE,QAAR,EAAkBE,iBAAlB,EAAqCE,iBAArC,CAAjB;AACD;;AAED,SAAO,6BACL,CACE,mBADF,EAEE,oBAFF,EAGE,wCAHF,EAIE,iCAJF,CADK,EAOLd,iBAPK,EAQLK,IARK,CAQA,gBAA6D;AAAA;AAAA,QAA3DG,KAA2D;AAAA,QAApDE,QAAoD;AAAA,QAA1CE,iBAA0C;AAAA,QAAvBE,iBAAuB;;AAClE,WAAOC,UAAU,CAACP,KAAD,EAAQE,QAAR,EAAkBE,iBAAlB,EAAqCE,iBAArC,CAAjB;AACD,GAVM,CAAP;AAWD;;AAED,SAASC,UAAT,CAAoBP,KAApB,EAA2BE,QAA3B,EAAqCE,iBAArC,EAAwDE,iBAAxD,EAA2E;AACzE,MAAME,SAAS,GAAG,2BAAgBN,QAAhB,CAAlB;AACA,MAAMO,eAAe,GAAG,iCAAsBL,iBAAtB,CAAxB;AACA,MAAMM,SAAS,GAAG,2BAAgBF,SAAhB,EAA2BR,KAA3B,EAAkCS,eAAlC,CAAlB;AACA,MAAME,YAAY,GAAG,8BAAmBH,SAAnB,EAA8BF,iBAA9B,CAArB;AAEAjB,EAAAA,MAAM,GAAG;AAACqB,IAAAA,SAAS,EAATA,SAAD;AAAYC,IAAAA,YAAY,EAAZA;AAAZ,GAAT;AACA,SAAOtB,MAAP;AACD","sourcesContent":["import createDeckProps from './deck-props';\nimport createDeckLayer from './deck-layer';\nimport createDeckLayerView2D from './deck-layer-view-2d';\nimport createDeckRenderer from './deck-renderer';\nimport {loadModules as esriLoaderLoadModules} from 'esri-loader';\n\nlet arcGIS = null;\n\nexport async function loadArcGISModules(modules, loadScriptOptions) {\n  const namespace = Array.isArray(modules) ? null : modules;\n  await loadArcGISModule(namespace, loadScriptOptions);\n\n  if (Array.isArray(modules)) {\n    return esriLoaderLoadModules(modules, loadScriptOptions).then(array => {\n      return {...arcGIS, modules: array};\n    });\n  }\n  return arcGIS;\n}\n\nfunction loadArcGISModule(esri, loadScriptOptions) {\n  if (arcGIS) {\n    // Already loaded\n    return arcGIS;\n  }\n  if (esri) {\n    // Using user-provided dependencies\n    // Right now this object has to be manually assembled - let @arcgis/webpack-plugin handle this?\n    const Layer = esri.layers.Layer;\n    const Accessor = esri.core.Accessor;\n    const BaseLayerViewGL2D = esri.views['2d'].layers.BaseLayerViewGL2D;\n    const externalRenderers = esri.views['3d'].externalRenderers;\n\n    return initialize(Layer, Accessor, BaseLayerViewGL2D, externalRenderers);\n  }\n\n  return esriLoaderLoadModules(\n    [\n      'esri/layers/Layer',\n      'esri/core/Accessor',\n      'esri/views/2d/layers/BaseLayerViewGL2D',\n      'esri/views/3d/externalRenderers'\n    ],\n    loadScriptOptions\n  ).then(([Layer, Accessor, BaseLayerViewGL2D, externalRenderers]) => {\n    return initialize(Layer, Accessor, BaseLayerViewGL2D, externalRenderers);\n  });\n}\n\nfunction initialize(Layer, Accessor, BaseLayerViewGL2D, externalRenderers) {\n  const DeckProps = createDeckProps(Accessor);\n  const DeckLayerView2D = createDeckLayerView2D(BaseLayerViewGL2D);\n  const DeckLayer = createDeckLayer(DeckProps, Layer, DeckLayerView2D);\n  const DeckRenderer = createDeckRenderer(DeckProps, externalRenderers);\n\n  arcGIS = {DeckLayer, DeckRenderer};\n  return arcGIS;\n}\n"],"file":"index.js"}